window.subscribersApp=window.subscribersApp||{},window.subscribersApp.calculator=function(e){var s=" readers",i=1,r="",n=e||0;return n>=1e3&&n<1e6?(r="K",i=1e3):n>=1e6&&n<1e9?(r="M",i=1e6):n>=1e9&&n<1e12&&(r="B",i=1e9),s=Math.floor(10*n/i)/10+r+s},window.subscribersApp=window.subscribersApp||{},window.subscribersApp.defaultConfig={chicklet:{message:"Subscribe",showCount:!0,position:"bottom",accent:"f16334",shade:"dark"},modal:{headline:"Don't miss any article. Subscribe to this blog.",subheadline:"You can turn off your notifications anytime from your browser",includeBranding:!0,ctaButton:"Subscribe",noButton:"Nope",accent:"f16334",icon:"https://placehold.it/200x200"},site:{subdomain:"neilpatel",mode:"modal",showModalAfter:5}},window.subscribersApp.fillChickletConfig=function(e){return e=e||{},e=window.subscribersApp.configFromDefaults(e,window.subscribersApp.defaultConfig.chicklet)},window.subscribersApp.fillModalConfig=function(e){return e=e||{},e=window.subscribersApp.configFromDefaults(e,window.subscribersApp.defaultConfig.modal)},window.subscribersApp.fillSiteConfig=function(e){return e=e||{},(e=window.subscribersApp.configFromDefaults(e,window.subscribersApp.defaultConfig.site)).mode=window.subscribersApp.effectiveMode(e),e},window.subscribersApp.configFromDefaults=function(e,s){for(var i in s)s.hasOwnProperty(i)&&(e[i]!==undefined&&null!==e[i]||(e[i]=s[i]));return e},window.subscribersApp.effectiveMode=function(e){return"nativeImmediate"!=e.mode||window.subscribersApp.onHttps()?e.mode:(console.log("nativeImmediate on http. Disabling"),"disabled")},window.subscribersApp.onHttps=function(){return"localhost"===location.hostname||"https:"===document.location.protocol},window.subscribersApp=window.subscribersApp||{},window.subscribersApp.ajax=function(e,s,i){return new Promise(function(r,n){var o=new XMLHttpRequest;o.onload=function(){200==this.status?r(JSON.parse(this.responseText)):n(o.status)},o.onerror=function(){n(o.status)},o.open(s,e,!0),"GET"!==s?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(i))):o.send()})},window.subscribersApp.getCookie=function(e){for(var s=e+"=",i=decodeURIComponent(document.cookie).split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(s))return n.substring(s.length,n.length)}return null},window.subscribersApp.setCookie=function(e){document.cookie=e+";path=/"},window.subscribersApp.loadScript=function(e){return new Promise(function(s,i){var r=document.createElement("script");r.type="text/javascript",r.onload=s,r.onerror=i,r.src=e,document.getElementsByTagName("body")[0].appendChild(r)})},window.subscribersApp.loadStylesheet=function(e){return new Promise(function(s,i){var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.onload=s,r.onerror=i,r.href=e,document.getElementsByTagName("head")[0].appendChild(r)})},window.subscribersApp.isIOS=function(e){return/(iPhone|iPad|iPod)/i.test(e)},window.subscribersApp=window.subscribersApp||{},window.subscribersApp.classNamespace="subscribers",window.subscribersApp.createContainer=function(e){var s=document.createElement("DIV"),i=e.split(" ").map(window.subscribersApp.toClass);return i.push(window.subscribersApp.classNamespace),s.className=i.join(" "),s},window.subscribersApp.toClass=function(e){return window.subscribersApp.classNamespace+"-"+e.trim()},window.subscribersApp.addClass=function(e,s){var i=e.className;return i=(i+" "+window.subscribersApp.toClass(s)).trim(),e.className=i,e},window.subscribersApp.removeClass=function(e,s){var i=e.className.replace(window.subscribersApp.toClass(s),"").trim();return e.className=i,e},window.subscribersApp=window.subscribersApp||{},window.subscribersApp.loadChickletStyles=function(){return window.subscribersApp.loadStylesheet(window.subscribersApp.styleSheetLocation)},window.subscribersApp.buildChicklet=function(e,s){var i,r=e.showCount;i='<h5 class="chicklet-action">%%MESSAGE%%</h5>',r&&(i+='<h6 class="chicklet-subscribers-count">%%COUNT%%</h6>');var n=window.subscribersApp.createContainer("chicklet");i=i.replace("%%MESSAGE%%",e.message),r&&(window.subscribersApp.addClass(n,"has-count"),i=i.replace("%%COUNT%%",s)),n.innerHTML=i,n.style.backgroundColor="#"+e.accent,n.style.color="light"===e.shade?"#333333":"#ffffff";for(var o=e.position.split(" "),t=0;t<o.length;t++)window.subscribersApp.addClass(n,"position-"+o[t]);return n},window.subscribersApp.buildSubscribeModalOnly=function(e,s){var i='<div class="subscribers-headline">                <div class="modal-image-wrapper">                  <img class="modal-image" src="%%ICON%%">                </div>                <div class="modal-text">                  <h3 class="modal-headline">%%HEADLINE%%</h3>                  <hr class="modal-hr" style="border-color: %%ACCENTCOLOR%%">                  <h4 class="modal-subheadline">%%SUBHEADLINE%%</h4>                </div>              </div>              <div class="subscribers-actions">                %%BRANDINGHTML%%                <span class="action-buttons">                  <button class="primary-action '+window.subscribersApp.classNamespace+'-cta-button" style="background-color: %%ACCENTCOLOR%%; color: white;" >%%CTABUTTON%%</button>                  <button class="secondary-action '+window.subscribersApp.classNamespace+'-no-button">%%NOBUTTON%%</button>                </span>              </div>',r='<h5 class="branding">Powered by <strong class="brand-link"><a href="%%SUBSCRIBERSHOMEPAGE%%" target="_blank" style="color: %%ACCENTCOLOR%%">subscribers</a></strong></h5>'.replace("%%SUBSCRIBERSHOMEPAGE%%",s);i=(i=(i=(i=(i=(i=(i=e.includeBranding?i.replace("%%BRANDINGHTML%%",r):i.replace("%%BRANDINGHTML%%","")).replace("%%HEADLINE%%",e.headline)).replace("%%SUBHEADLINE%%",e.subheadline)).replace("%%ICON%%",e.icon)).replace("%%CTABUTTON%%",e.ctaButton)).replace("%%NOBUTTON%%",e.noButton)).replace(/%%ACCENTCOLOR%%/g,"#"+e.accent);var n=window.subscribersApp.createContainer("modal");return n.innerHTML=i,n},window.subscribersApp.buildSubscribeModal=function(e,s){var i=window.subscribersApp.buildSubscribeModalOnly(e,s),r=window.subscribersApp.createContainer("modal-container"),n=window.subscribersApp.createContainer("modal-overlay");return r.appendChild(n),r.appendChild(i),window.subscribersApp.addClass(r,"not-displayed"),window.subscribersApp.addClass(r,"hide-animate"),{container:r,modal:i,overlay:n}},window.subscribersApp.keyValueDatabaseUrl="https://test-c44fe.firebaseio.com/",window.subscribersApp.baseConfigUrl="https://cdn.subscribers.com/config/",window.subscribersApp.subscribersHomePage="https://subscribers.com",window.subscribersApp.styleSheetLocation="https://cdn.subscribers.com/assets/subscribers.css",window.subscribersApp.clickServerSuffix="subscribers.com",window.subscribersApp.clientData=function(){var e="safari"in window,s="opera"in window,i="chrome"in window,r="netscape"in window,n="Intl"in window?Intl.DateTimeFormat().resolvedOptions().timeZone:null;return{userAgent:navigator.userAgent,appName:navigator.appName,appVersion:navigator.appVersion,vendor:navigator.vendor,vendorSub:navigator.vendorSub,platform:navigator.platform,language:navigator.language,languages:navigator.languages,opera:s,safari:e,chrome:i,netscape:r,timezoneOffset:(new Date).getTimezoneOffset(),timezone:n}},window.subscribersApp.postToken=function(e){return window.subscribersApp.ajax(window.subscribersApp.subscribersSubscribeUrl,"POST",{service:e.service,token:e.token,uuid:window.subscribersApp.siteUUID||window.subscribersSiteId,vendor:e.vendor,metaData:window.subscribersApp.clientData()})},window.subscribersApp=window.subscribersApp||{},window.subscribersApp.loadFirebase=function(){var e="4.5.2",s="https://www.gstatic.com/firebasejs/";return window.subscribersApp.loadScript(s+e+"/firebase-app.js").then(function(){return window.subscribersApp.loadScript(s+e+"/firebase-messaging.js")})["catch"](function(e){throw console.log(e),e})},window.subscribersApp.requestFirebasePermission=function(){return new Promise(function(e,s){window.subscribersApp.loadFirebase().then(function(){firebase.initializeApp({messagingSenderId:window.subscribersApp.firebaseID});var i=firebase.messaging();navigator.serviceWorker.register(window.subscribersApp.serviceWorkerPath).then(function(e){i.useServiceWorker(e)}).then(function(){return i.requestPermission()}).then(function(){return i.getToken()}).then(function(s){e(s)})["catch"](function(e){s(Error("There was an error with Firebase: "+e))})})["catch"](function(e){s(Error("There was an error loading Firebase: "+e))})})},window.subscribersApp=window.subscribersApp||{},window.subscribersApp.requestSafariPermission=function(){return new Promise(function(e,s){function i(i){"default"===i.permission?s("User didn't choose anything"):"denied"===i.permission?s("denied"):"granted"===i.permission&&e(i.deviceToken)}window.safari.pushNotification.requestPermission(window.subscribersApp.appleAPNEndpoint,window.subscribersApp.appleWebsitePushID,{siteUUID:window.subscribersApp.siteUUID},i)})},window.subscribersApp.askToSubscribe=function(e,s,i){if(window.safari&&""!=window.subscribersApp.appleWebsitePushID){var r=window.subscribersApp.getSafariPermissionData();window.subscribersApp.permissionAlreadySet(r)&&!i?s(r):window.subscribersApp.permissionDenied(r)&&i?alert("Please allow permission to send notifications."):window.subscribersApp.requestSafariPermission().then(function(i){window.subscribersApp.postToken({service:"apple",vendor:"1",token:i}).then(e,s)})["catch"](function(e){console.log(Error("There was an error with Safari: "+e))})}else if("Notification"in window&&"serviceWorker"in navigator){r=window.subscribersApp.getFirebasePermissionData();window.subscribersApp.permissionAlreadySet(r)&&!i?s(r):window.subscribersApp.permissionDenied(r)&&i?alert("Please allow permission to send notifications."):window.subscribersApp.requestFirebasePermission().then(function(i){window.subscribersApp.postToken({service:"firebase",vendor:"0",token:i}).then(e,s)})["catch"](function(e){s(Error("There was an error with Firebase: "+e))})}else s("nosupport")},window.subscribersApp.getSafariPermissionData=function(){return window.safari.pushNotification.permission(window.subscribersApp.appleWebsitePushID).permission},window.subscribersApp.getFirebasePermissionData=function(){return Notification.permission},window.subscribersApp.permissionAlreadySet=function(e){return"default"!=e},window.subscribersApp.permissionDenied=function(e){return"denied"==e},window.subscribersApp.seeItInAction=function(){noop=function(){},window.subscribersApp.askToSubscribe(noop,noop,!0)},window.subscribersApp=window.subscribersApp||{},window.subscribersApp.subscribersSubscribeUrl="https://subscribe.subscribers.com/api/v1/subscriptions/subscribe",window.subscribersApp.firebaseID="963812740552",window.subscribersApp.appleAPNEndpoint="https://apn.subscribers.com/apn",window.subscribersApp.serviceWorkerPath=window.subscribersServiceWorkerPath||"/firebase-messaging-sw.js",function(){function e(){y()&&(g()||s(b()).then(function(){switch(window.subscribersApp.effectiveSiteConfig.mode){case"disabled":break;case"modal":window.subscribersApp.loadChickletStyles().then(function(){n(),o(window.subscribersApp.effectiveSiteConfig.showModalAfter)});break;case"nativeImmediate":t(window.subscribersApp.effectiveSiteConfig.showModalAfter)}}))}function s(e){return window.subscribersApp.ajax(e,"GET").then(function(e){window.subscribersApp.configuration=e,window.subscribersApp.effectiveSiteConfig=window.subscribersApp.fillSiteConfig(window.subscribersApp.configuration.site),window.subscribersApp.effectiveChickletConfig=window.subscribersApp.fillChickletConfig(window.subscribersApp.configuration.chicklet),window.subscribersApp.effectiveModalConfig=window.subscribersApp.fillModalConfig(window.subscribersApp.configuration.modal),window.subscribersApp.siteUUID=a(),window.subscribersApp.appleWebsitePushID=window.subscribersApp.effectiveSiteConfig.appleWebsitePushId})}function i(e,s){N.chicklet=window.subscribersApp.buildChicklet(e,s),document.body.appendChild(N.chicklet),N.chicklet.addEventListener("click",v)}function r(){N.chicklet&&(N.chicklet.style.display="none")}function n(){var e=window.subscribersApp.effectiveChickletConfig;e.showCount?p().then(function(s){var r=window.subscribersApp.calculator(s);i(e,r)}):i(e,null);var s=window.subscribersApp.effectiveModalConfig;N.modal=window.subscribersApp.buildSubscribeModal(s,window.subscribersApp.subscribersHomePage),document.body.appendChild(N.modal.container),N.modal.ctaButton=N.modal.modal.getElementsByClassName("subscribers-cta-button")[0],N.modal.noButton=N.modal.modal.getElementsByClassName("subscribers-no-button")[0],N.modal.overlay.addEventListener("click",C),N.modal.ctaButton.addEventListener("click",S),N.modal.noButton.addEventListener("click",k)}function o(e){-1!=e&&setTimeout(d,1e3*e)}function t(e){-1!=e&&setTimeout(f,1e3*e)}function c(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?"Safari":/(msie|trident|edge)/i.test(navigator.userAgent)?"Microsoft":/(chrome|android)/i.test(navigator.userAgent)?"Chrome":/(mozilla|firefox)/i.test(navigator.userAgent)?"Firefox":"unknown"}function a(){return window.subscribersSiteId}function b(){return window.subscribersApp.baseConfigUrl+a()+".json"}function p(){var e=window.subscribersApp.keyValueDatabaseUrl+"sites/"+a()+".json";return window.subscribersApp.ajax(e,"GET")}function u(){N.modal&&(window.subscribersApp.addClass(N.modal.container,"hide-animate"),setTimeout(function(){window.subscribersApp.addClass(N.modal.container,"not-displayed")},1100))}function d(e){(e||!window.subscribersApp.modalHasBeenOpened&&!h())&&(window.subscribersApp.removeClass(N.modal.container,"not-displayed"),window.subscribersApp.removeClass(N.modal.container,"hide-animate"),N.modal.container.style.display="",window.subscribersApp.modalHasBeenOpened=!0)}function w(){var e=800,s=700,i=screen.width/2-e/2,r=screen.height/2-s/2;return window.open(window.subscribersApp.clickServer(),"subscribers.com","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+e+", height="+s+", top="+r+", left="+i)}function l(){var e=A(7);window.subscribersApp.setCookie("isPushNotificationClient=false;expires="+e)}function f(){"nativeImmediate"==window.subscribersApp.effectiveSiteConfig.mode?window.subscribersApp.askToSubscribe(m,function(e){console.error("error subscribing",e)}):w(),u()}function A(e){var s=new Date,i=new Date(s);return i.setDate(s.getDate()+e),i.toUTCString()}function m(){var e=A(3650);window.subscribersApp.setCookie("subscribers-app-subscribed=true;expires="+e),r()}function h(){return"false"===window.subscribersApp.getCookie("isPushNotificationClient")}function g(){return"true"===window.subscribersApp.getCookie("subscribers-app-subscribed")}function v(){d(!0)}function C(){l(),u()}function S(){f()}function k(){l(),u()}function y(){return!window.subscribersApp.isIOS(navigator.userAgent)&&(c=c(),null!==a()&&("Chrome"==c||"Firefox"==c||"Safari"==c))}window.subscribersApp.modalHasBeenOpened=!1,window.subscribersApp.clickServer=function(){return"https://"+window.subscribersApp.effectiveSiteConfig.subdomain+"."+window.subscribersApp.clickServerSuffix};var N={};window.addEventListener("message",function(e){"subscribers-app-subscribed"===e.data&&m()},!1),e()}();